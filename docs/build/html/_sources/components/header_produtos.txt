Header de Produtos
==================

.. include:: ../times/portalpadroes.rst

Dependências
------------

É necessária a inclusão de algumas bibliotecas/componentes para sua utilização
correta:

* CDA
    * jQuery v.1.4.x


Instalação
----------

Para utilizar esta funcionalidade do libby, inclua a seguinte app como INSTALLED_APPS:

.. code-block:: python

    INSTALLED_APPS = [
        #...
        'libby.componentes.header_produtos',
        #...
    ]

Para que o novo menu seja renderizado deve-se sobrescrever o template de menu no caminho /common/menu.html.
Isto é necessário para sobrescrever o template de menu do globocore.

Caso a sua app seja "main", o template menu.html ficaria em /main/templates/common/menu.html.

.. note::

    Também é possível usar o novo menu com outro tipo de menu.
    Para usar o tipo "menu abas", por exemplo, crie o template /common/menu_aba.html.

Este template precisa extender o template menu_base.html do libby, conforme abaixo:: 

    {% extends "libby/header_produtos/menu_base.html" %}

O template menu_base possui os blocos 'pre_menu' e 'pos_menu', que podem ser usados para adicionar markup antes ou depois do menu.

.. note::

    Deve-se republicar todos os menus horizontais.

Customizações
-------------

Para customizar o menu com as cores do produto, deve-se primeiramente editar a imagem da aba do
menu (libby/media/header_produtos/img/sprite_menu_item.psd).

.. note::

    Salve a imagem como png24 e depois use a ferramenta 
    `pngquant <http://pornel.net/pngquant>`_ para criar 
    um png8 que trará um bom resultado cross-browser para 
    a transparência da imagem.

.. admonition:: css

    As cores do header do produto devem ser sobrescritas com as
    cores do produto, como pode ser visto na 
    `lista de estilos padrão, com cor de exemplo(azul) <http://ngit.globoi.com/libby/libby/trees/master/libby/componentes/header_produtos/media/libby/header_produtos/css/libby.menu.cores.css>`_.

    Para que a folha de estilo padrão não seja incluída automaticamente, inclua
    a configuração LIBBY_INCLUDE_CSS_COLORS como False no arquivo de
    configuração (settings.py).


Solução de problemas
--------------------

Se o HTML renderizado for igual ao do globocore
+++++++++++++++++++++++++++++++++++++++++++++++

É possível que a pasta de templates do globocore esteja precedendo a pasta de template do seu projeto
e o template renderizado continua sendo o /common/menu.html que está dentro do globocore.
Para que a aplicação renderize o HTML do novo menu é necessário modificar a setting
`TEMPLATE_DIRS <http://docs.djangoproject.com/en/1.2/ref/settings/#template-dirs>`_. Para isso,
Adicione o seguinte código no settings do projeto:

.. code-block:: python

    TEMPLATE_DIRS = (

        LOCAL_FILE('nome_da_app', 'templates'),
        LOCAL_FILE('globocom', 'templates'),

    ) + TEMPLATE_DIRS
